'use strict';

const utils = require('./utils');

const getStageState = (sdk, orgUid, appUid, serviceName, stageName, stateKey) => {
  return utils.request({
    endpoint: `${sdk.getDomain(
      'desktop'
    )}/orgs/${orgUid}/apps/${appUid}/services/${serviceName}/stages/${stageName}/states/${stateKey}`,
    method: 'GET',
    accessKey: sdk.accessKey,
  });
};

const saveStageState = (sdk, orgUid, appUid, serviceName, stageName, stateKey, state) => {
  return utils.request({
    endpoint: `${sdk.getDomain(
      'desktop'
    )}/orgs/${orgUid}/apps/${appUid}/services/${serviceName}/stages/${stageName}/states/${stateKey}`,
    method: 'POST',
    accessKey: sdk.accessKey,
    data: state,
  });
};

const removeStageState = (sdk, orgUid, appUid, serviceName, stageName, stateKey) => {
  return utils.request({
    endpoint: `${sdk.getDomain(
      'desktop'
    )}/orgs/${orgUid}/apps/${appUid}/services/${serviceName}/stages/${stageName}/states/${stateKey}`,
    method: 'DELETE',
    accessKey: sdk.accessKey,
  });
};

module.exports = {
  getStageState,
  saveStageState,
  removeStageState,
};
